"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _winston=_interopRequireDefault(require("winston")),_winstonTransportSentryNode=_interopRequireDefault(require("winston-transport-sentry-node")),_config=require("../config");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var transports=[new _winston["default"].transports.Console({level:"info",colorize:!0})],exceptionTransports=[new _winston["default"].transports.Console];if("local"===_config.app.env&&_config.app.debug&&(transports.push(new _winston["default"].transports.File({filename:"logs/logs.log"})),transports.push(new _winston["default"].transports.File({filename:"logs/errors.log",level:"error"})),exceptionTransports.push(new _winston["default"].transports.File({filename:"logs/exceptions.log"}))),_config.sentry.enabled){var sentryTransport=new _winstonTransportSentryNode["default"]({sentry:{dsn:_config.sentry.dsn,environment:_config.app.env,debug:_config.app.debug,tags:{service:_config.app.service}},level:_config.sentry.level});transports.push(sentryTransport),exceptionTransports.push(sentryTransport)}var loggerOptions={level:"info",format:_winston["default"].format.json(),defaultMeta:{environment:_config.app.env,service:_config.app.service},transports:transports,exceptionHandlers:exceptionTransports},logger=_winston["default"].createLogger(loggerOptions),_default=logger;exports["default"]=_default;